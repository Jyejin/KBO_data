# KBO_data

안녕하세요. 외대 철학과 스터디 그룹 LOPES의 추선식 입니다.


스터디를 하면서 R에 대한 여러 책을 접하고 해당 책들의 예제 데이터로 학습하면서 느낀 점은 책에서 제시되는 잘 정리되고 학습에 맞게 구성된 데이터가 적고 이런 형태의 자료를 현실적으로 찾아보기 어렵다는 점입니다. 물론 캐글(Kaggle)이나 서울시 통계자료같이 오픈된 곳들도 있습니다. 하지만 특정 자료들에 대한 동기 부여가 잘 안 되며 자료를 실제로 어떠한 방식으로 분석해야 할지 접근하기가 쉽지 않았습니다. 그래서 대중적으로도 인기가 있는 한국의 프로야구 자료를 이용해 보기로 하였습니다.   


위와 관련된 것을 자세히 말하자면 KBO홈페이지에 등록된 2010년도부터 현재 2016년도까지의 야구 자료를 작업해서 한 번에 모으고 보기 좋게 정리한 자료를 만드는 것입니다. KBO사이트와 더불어 네이버의 야구 자료가 2010년 이전의 자료도 있기에 그쪽으로도 작업을 하여 데이터를 추가하려 했지만, 네이버의 자료가 결측값이나 잘못되거나 빠진 경우가 많아서 KBO사이트만을 참조하여 자료를 만들었습니다.


자료를 만드는 과정에 대해서는 간략하게 소개하면 다음과 같습니다. 자료에 기초가 되는 데이터인 경기 기록들을 드래그하여 엑셀 파일로 저장합니다. 이 부분은 크롤링 능력이 부족하여서 수작업으로 진행하였으며 이후 만들어진 자료에서 눈으로 빠진 부분 있는지 확인하였습니다. 기초 엑셀 작업이 7년 치가 완료되면 csv파일로 만든 다음 R에서 경기에 관한 정보들을 원정팀, 홈팀, 점수 등의 구분 열로 나누어서 만듭니다. 이러한 과정을 거쳐 최종적으로 7년 치를 한번에 모아 단일한 자료로 만들어 주면 과정은 종료 됩니다.


저희가 수집하고 가공한 자료는 약 7년 치의 한국 프로야구 데이터가 있기에 특정팀의 연도에 따른 연속적인 변화나 7년의 기간의 최대 득점 경기 혹은 포스트 시즌에 올라간 팀 목록 등을 확인할 수 있습니다. 또한, 점수와 홈팀, 원정팀 구분하여 경기정보를 쉽게 확인해 볼 수 있으며 다양한 기록들을 시각화해볼 수 있습니다.

# 사용법

```
## 경기 결과열을 만들어 줍니다.

kbo_total$경기결과  <- ifelse(kbo_total$홈팀점수>kbo_total$원정팀점수,"홈팀승",ifelse(kbo_total$홈팀점수<kbo_total$원정팀점수,"원정팀승","무"))

## 정규시즌만 뽑아 줍니다.

temp <- subset(kbo_total,kbo_total$비고=="정규시즌")

## 홈팀의 경기 수를 경기 결과별로 분류해줍니다.
home.agg <-aggregate(홈팀점수~홈팀+경기결과,temp,length)
hometeam_win <- temp.agg[home.agg$경기결과=="홈팀승",]

## 원정팀의 경기 수를 경기 결과별로 분류해줍니다.
away.agg <-aggregate(원정팀점수~원정팀+경기결과,temp,length)
awayteam_win <- away.agg[away.agg$경기결과=="원정팀승",]

## 홈팀일 때 승리가 많은 순서대로 나열한 그래프를 그립니다.
ggplot(hometeam_win,aes(x=홈팀,y=홈팀점수,fill=경기결과))+geom_bar(stat="identity",colour = "black")+
scale_x_discrete(limits=c("삼성", "넥센", "두산", "롯데", "SK", "LG", "KIA", "한화", "NC","kt"  ))+
theme(axis.text.x= element_text(angle=90, hjust=1))+
geom_text(aes(y=홈팀점수,label=홈팀점수),size=4,vjust=1.5)+
facet_wrap(~경기결과)

## 원정팀일 때 승리가 많은 순서대로 나열한 그래프를 그립니다.
ggplot(awayteam_win ,aes(x=원정팀,y=원정팀점수,fill=경기결과))+geom_bar(stat="identity",colour = "black")+
scale_x_discrete(limits=c("삼성", "두산", "SK", "넥센", "LG", "KIA",  "롯데", "한화", "NC", "kt"))+
theme(axis.text.x= element_text(angle=90, hjust=1))+
geom_text(aes(y=원정팀점수,label=원정팀점수),size=4,vjust=1.5)+
facet_wrap(~경기결과)

```

다음 글에서는 이 자료를 통해 팀별 승률에 대한 함수로 찾아뵙겠습니다. 읽어 주셔서 감사합니다.
